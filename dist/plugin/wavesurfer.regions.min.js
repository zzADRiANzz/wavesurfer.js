/*!
 * wavesurfer.js regions plugin 5.2.0 (2022-04-11)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("WaveSurfer",[],t):"object"==typeof exports?exports.WaveSurfer=t():(e.WaveSurfer=e.WaveSurfer||{},e.WaveSurfer.regions=t())}(self,(()=>(()=>{"use strict";var e={23:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(638);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.wavesurfer=i,this.util=s(s({},i.util),{},{getRegionSnapToGridValue:function(e){return n.getRegionSnapToGridValue(e,t)}}),this.maxRegions=t.maxRegions,this.regionsMinLength=t.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach((function(e){r.Region.prototype[e]=n.util.Observer.prototype[e]})),this.wavesurfer.Region=r.Region;this._onBackendCreated=function(){n.wrapper=n.wavesurfer.drawer.wrapper,n.orientation=n.wavesurfer.drawer.orientation,n.defaultEdgeScrollWidth=.05*n.wrapper.clientWidth,n.params.regions&&n.params.regions.forEach((function(e){n.add(e)}))},this.list={},this._onReady=function(){n.wrapper=n.wavesurfer.drawer.wrapper,n.vertical=n.wavesurfer.drawer.params.vertical,n.params.dragSelection&&n.enableDragSelection(n.params),Object.keys(n.list).forEach((function(e){n.list[e].updateRender()}))}}var t,i,n;return t=e,n=[{key:"create",value:function(t){return{name:"regions",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,staticProps:{addRegion:function(e){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(e)},clearRegions:function(){this.regions&&this.regions.clear()},enableDragSelection:function(e){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(e)},disableDragSelection:function(){this.regions.disableDragSelection()}},instance:e}}}],(i=[{key:"init",value:function(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}},{key:"destroy",value:function(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}},{key:"wouldExceedMaxRegions",value:function(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}},{key:"add",value:function(e){var t=this;if(this.wouldExceedMaxRegions())return null;!(e=s({edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth},e)).formatTimeCallback&&this.params.formatTimeCallback&&(e=s(s({},e),{},{formatTimeCallback:this.params.formatTimeCallback})),!e.minLength&&this.regionsMinLength&&(e=s(s({},e),{},{minLength:this.regionsMinLength}));var i=new this.wavesurfer.Region(e,this.util,this.wavesurfer);return this.list[i.id]=i,i.on("remove",(function(){delete t.list[i.id]})),i}},{key:"clear",value:function(){var e=this;Object.keys(this.list).forEach((function(t){e.list[t].remove()}))}},{key:"enableDragSelection",value:function(e){var t=this;this.disableDragSelection();var i,r,n,s,a,o,l,h=e.slop||2,d=this.wavesurfer.drawer.container,u=!1!==e.scroll&&this.wavesurfer.params.scrollParent,c=e.scrollSpeed||1,v=e.scrollThreshold||10,f=this.wavesurfer.getDuration(),g=e.touchesToCreateRegion||1,p=0,m=function e(i){if(s&&o){var a=t.wrapper.scrollLeft+c*o;t.wrapper.scrollLeft=a=Math.min(r,Math.max(0,a));var l=t.wavesurfer.drawer.handleEvent(i);s.update({start:Math.min(l*f,n*f),end:Math.max(l*f,n*f)}),a<r&&a>0&&window.requestAnimationFrame((function(){e(i)}))}},y=function(h){if(!(h.touches&&h.touches.length<g)){if(f=t.wavesurfer.getDuration(),a=h.targetTouches?h.targetTouches[0].identifier:null,r=t.wrapper.scrollWidth-t.wrapper.clientWidth,l=t.util.withOrientation(t.wrapper.getBoundingClientRect(),t.vertical),t.wavesurfer.params.splitChannels){var d=(h.touches?h.touches[0].clientY:h.clientY)-l.top,u=null!=t.wavesurfer.backend.buffer?t.wavesurfer.backend.buffer.numberOfChannels:1,c=t.wrapper.clientHeight/u,v=Math.floor(d/c);e.channelIdx=v;var p=t.wavesurfer.params.splitChannelsOptions.channelColors[v];p&&p.dragColor&&(e.color=p.dragColor)}i=!0,n=t.wavesurfer.drawer.handleEvent(h,!0),s=null,o=null}};this.wrapper.addEventListener("mousedown",y),this.wrapper.addEventListener("touchstart",y),this.on("disable-drag-selection",(function(){t.wrapper.removeEventListener("touchstart",y),t.wrapper.removeEventListener("mousedown",y)}));var w=function(e){e.touches&&e.touches.length>1||(i=!1,p=0,o=null,s&&(t.util.preventClick(),s.fireEvent("update-end",e),t.wavesurfer.fireEvent("region-update-end",s,e)),s=null)};this.wrapper.addEventListener("mouseleave",w),this.wrapper.addEventListener("mouseup",w),this.wrapper.addEventListener("touchend",w),document.body.addEventListener("mouseup",w),document.body.addEventListener("touchend",w),this.on("disable-drag-selection",(function(){document.body.removeEventListener("mouseup",w),document.body.removeEventListener("touchend",w),t.wrapper.removeEventListener("touchend",w),t.wrapper.removeEventListener("mouseup",w),t.wrapper.removeEventListener("mouseleave",w)}));var b=function(r){if(i&&!(++p<=h)&&!(r.touches&&r.touches.length<g)&&(!r.targetTouches||r.targetTouches[0].identifier==a)&&(s||(s=t.add(e||{})))){var c=t.wavesurfer.drawer.handleEvent(r),y=t.wavesurfer.regions.util.getRegionSnapToGridValue(n*f),w=t.wavesurfer.regions.util.getRegionSnapToGridValue(c*f);s.update({start:Math.min(w,y),end:Math.max(w,y)});var b=t.util.withOrientation(r,t.vertical);if(u&&d.clientWidth<t.wrapper.scrollWidth){var E=b.clientX-l.left;(o=E<=v?-1:E>=l.right-v?1:null)&&m(r)}}};this.wrapper.addEventListener("mousemove",b),this.wrapper.addEventListener("touchmove",b),this.on("disable-drag-selection",(function(){t.wrapper.removeEventListener("touchmove",b),t.wrapper.removeEventListener("mousemove",b)})),this.wavesurfer.on("region-created",(function(e){t.regionsMinLength&&(e.minLength=t.regionsMinLength)}))}},{key:"disableDragSelection",value:function(){this.fireEvent("disable-drag-selection")}},{key:"getCurrentRegion",value:function(){var e=this,t=this.wavesurfer.getCurrentTime(),i=null;return Object.keys(this.list).forEach((function(r){var n=e.list[r];n.start<=t&&n.end>=t&&(!i||n.end-n.start<i.end-i.start)&&(i=n)})),i}},{key:"getRegionSnapToGridValue",value:function(e,t){if(t.snapToGridInterval){var i=t.snapToGridOffset||0;return Math.round((e-i)/t.snapToGridInterval)*t.snapToGridInterval+i}return e}}])&&o(t.prototype,i),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=l,e.exports=t.default},638:(e,t)=>{function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0;var r=function(){function e(t,i,r){var n,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wavesurfer=r,this.wrapper=r.drawer.wrapper,this.util=r.util,this.style=this.util.style,this.regionsUtil=i,this.vertical=r.drawer.params.vertical,this.id=null==t.id?r.util.getId():t.id,this.start=Number(t.start)||0,this.end=null==t.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(t.end),this.resize=void 0===t.resize||Boolean(t.resize),this.drag=void 0===t.drag||Boolean(t.drag),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(t.loop),this.color=t.color||"rgba(0, 0, 0, 0.1)",this.background=t.background||null,this.handleStyle=t.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=t.data||{},this.attributes=t.attributes||{},this.showTooltip=null===(n=t.showTooltip)||void 0===n||n,this.editMode=t.editMode||!1,this.accepted=t.accepted||!1,this.mode=t.mode||"default",this.prevMode=null,this.styleOptions=[],this.maxLength=t.maxLength,this.minLength=t.minLength,this._onRedraw=function(){return s.updateRender()},this.scroll=!1!==t.scroll&&r.params.scrollParent,this.scrollSpeed=t.scrollSpeed||1,this.scrollThreshold=t.scrollThreshold||10,this.preventContextMenu=void 0!==t.preventContextMenu&&Boolean(t.preventContextMenu);var a=null==t.channelIdx?-1:parseInt(t.channelIdx);if(this.channelIdx=a,this.regionHeight=t.height||"100%",this.marginTop="0px",-1!==a){var o=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:-1;o>=0&&a<o&&(this.regionHeight=Math.floor(1/o*100)+"%",this.marginTop=this.wavesurfer.getHeight()*a+"px")}this.formatTimeCallback=t.formatTimeCallback,this.edgeScrollWidth=t.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}var t,r,n;return t=e,(r=[{key:"addStyleState",value:function(e){var t,i,r,n,s,a,o,l,h,d={name:null!==(t=e.name)&&void 0!==t?t:"default",background:null!==(i=e.background)&&void 0!==i?i:"linear-gradient(rgba(0, 0, 0, 0), #ed506acc, rgba(0, 0, 0, 0))",leftHandleDisplayStyle:null!==(r=e.leftHandleDisplayStyle)&&void 0!==r?r:"none",rightHandleDisplayStyle:null!==(n=e.rightHandleDisplayStyle)&&void 0!==n?n:"none",leftBorderStyle:null!==(s=e.leftBorderStyle)&&void 0!==s?s:"",rightBorderStyle:null!==(a=e.rightBorderStyle)&&void 0!==a?a:"",zIndexStyle:null!==(o=e.zIndexStyle)&&void 0!==o?o:3,regionHoverState:null!==(l=e.regionHoverState)&&void 0!==l&&l,canResizeRegion:null!==(h=e.canResizeRegion)&&void 0!==h&&h};this.styleOptions.push(d)}},{key:"setStyleState",value:function(e){var t=this.styleOptions.find((function(t){return t.name===e}));if(t)this.update({background:t.background}),this.handleLeftEl.style.display=t.leftHandleDisplayStyle,this.handleRightEl.style.display=t.rightHandleDisplayStyle,this.element.style.borderRight=t.rightBorderStyle,this.element.style.borderLeft=t.leftBorderStyle,this.element.style.zIndex=t.zIndexStyle,t.regionHoverState?this.element.classList.add("region-hover"):this.element.classList.remove("region-hover"),this.resize=t.canResizeRegion,this.prevMode=this.mode,this.mode=t.name;else{var i=this.styleOptions.find((function(e){e.name}));this.update({background:i.background}),this.handleLeftEl.style.display=i.leftHandleDisplayStyle,this.handleRightEl.style.display=i.rightHandleDisplayStyle,this.element.style.borderRight=i.rightBorderStyle,this.element.style.borderLeft=i.leftBorderStyle,this.element.style.zIndex=i.zIndexStyle,i.regionHoverState?this.element.classList.add("region-hover"):this.element.classList.remove("region-hover"),this.resize=i.canResizeRegion,this.prevMode=this.mode,this.mode=i.name}}},{key:"changeToDefault",value:function(){this.update({background:"linear-gradient(rgba(0, 0, 0, 0), #ed506acc, rgba(0, 0, 0, 0))"}),this.handleLeftEl.style.display="none",this.handleRightEl.style.display="none",this.element.style.borderRight="",this.element.style.borderLeft="",this.element.style.zIndex=3,this.element.classList.remove("region-hover"),this.resize=!1,this.prevMode=this.mode,this.mode="default"}},{key:"changeToEdit",value:function(){this.update({background:"linear-gradient(rgba(0, 0, 0, 0), #225db3c4, rgba(0, 0, 0, 0))"}),this.handleLeftEl.style.display="block",this.handleRightEl.style.display="block",this.element.style.borderRight="2px solid #225DB3",this.element.style.borderLeft="2px solid #225DB3",this.element.style.zIndex=4,this.element.classList.remove("region-hover"),this.resize=!0,this.prevMode=this.mode,this.mode="edit"}},{key:"changeToAccepted",value:function(){this.update({background:"linear-gradient(rgba(0, 0, 0, 0), #E7F971cc, rgba(0, 0, 0, 0))"}),this.handleLeftEl.style.display="none",this.handleRightEl.style.display="none",this.element.style.borderRight="",this.element.style.borderLeft="",this.element.style.zIndex=3,this.element.classList.remove("region-hover"),this.resize=!1,this.prevMode=this.mode,this.mode="accepted"}},{key:"changeToIgnored",value:function(){this.update({background:"#ffffff00"}),this.handleLeftEl.style.display="none",this.handleRightEl.style.display="none",this.element.style.borderRight="2px solid #C8CCCC",this.element.style.borderLeft="2px solid #C8CCCC",this.element.style.zIndex=3,this.element.classList.add("region-hover"),this.resize=!1,this.prevMode=this.mode,this.mode="ignored"}},{key:"changeToRestore",value:function(){this.update({background:"linear-gradient(rgba(0, 0, 0, 0), #C8CCCCcc, rgba(0, 0, 0, 0))"}),this.handleLeftEl.style.display="none",this.handleRightEl.style.display="none",this.element.style.borderRight="2px solid #C8CCCC",this.element.style.borderLeft="2px solid #C8CCCC",this.element.style.zIndex=3,this.element.classList.remove("region-hover"),this.resize=!1,this.prevMode=this.mode,this.mode="restore"}},{key:"update",value:function(e,t){null!=e.start&&(this.start=Number(e.start)),null!=e.end&&(this.end=Number(e.end)),null!=e.loop&&(this.loop=Boolean(e.loop)),null!=e.color&&(this.color=e.color),null!=e.background&&(this.background=e.background),null!=e.handleStyle&&(this.handleStyle=e.handleStyle),null!=e.data&&(this.data=e.data),null!=e.resize&&(this.resize=Boolean(e.resize),this.updateHandlesResize(this.resize)),null!=e.drag&&(this.drag=Boolean(e.drag)),null!=e.maxLength&&(this.maxLength=Number(e.maxLength)),null!=e.minLength&&(this.minLength=Number(e.minLength)),null!=e.attributes&&(this.attributes=e.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,t)}},{key:"remove",value:function(){this.element&&(this.wrapper.removeChild(this.element.domElement),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}},{key:"play",value:function(e){var t=e||this.start;this.wavesurfer.play(t,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}},{key:"playLoop",value:function(e){this.loop=!0,this.play(e)}},{key:"setLoop",value:function(e){this.loop=e}},{key:"render",value:function(){for(var e in this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id),this.attributes)this.element.setAttribute("data-region-"+e,this.attributes[e]);if(this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";var t={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},i="none"!==this.handleStyle.left?Object.assign({left:"0px"},t,this.handleStyle.left):null,r="none"!==this.handleStyle.right?Object.assign({right:"0px"},t,this.handleStyle.right):null;i&&this.style(this.handleLeftEl,i),r&&this.style(this.handleRightEl,r)}this.updateRender(),this.bindEvents()}},{key:"formatTime",value:function(e,t){return this.formatTimeCallback?this.formatTimeCallback(e,t):(e==t?[e]:[e,t]).map((function(e){return[Math.floor(e%3600/60),("00"+Math.floor(e%60)).slice(-2)].join(":")})).join("-")}},{key:"getWidth",value:function(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:"updateRender",value:function(){var e=this.wavesurfer.getDuration(),t=this.getWidth(),i=this.start,r=this.end;if(i<0&&(r-=i=0),r>e&&(i=e-((r=e)-i)),null!=this.minLength&&(r=Math.max(i+this.minLength,r)),null!=this.maxLength&&(r=Math.min(i+this.maxLength,r)),null!=this.element){var n=Math.round(i/e*t),s=Math.round(r/e*t)-n;for(var a in this.style(this.element,{left:n+"px",width:s+"px",backgroundColor:this.color,background:this.background,cursor:this.drag?"move":"default"}),this.attributes)this.element.setAttribute("data-region-"+a,this.attributes[a]);this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}},{key:"bindInOut",value:function(){var e=this;this.firedIn=!1,this.firedOut=!1;var t=function(t){var i=Math.round(10*e.start)/10,r=Math.round(10*e.end)/10;t=Math.round(10*t)/10,!e.firedOut&&e.firedIn&&(i>t||r<=t)&&(e.firedOut=!0,e.firedIn=!1,e.fireEvent("out"),e.wavesurfer.fireEvent("region-out",e)),!e.firedIn&&i<=t&&r>t&&(e.firedIn=!0,e.firedOut=!1,e.fireEvent("in"),e.wavesurfer.fireEvent("region-in",e))};this.wavesurfer.backend.on("audioprocess",t),this.on("remove",(function(){e.wavesurfer.backend.un("audioprocess",t)})),this.on("out",(function(){if(e.loop){var t=e.wavesurfer.getCurrentTime();t>=e.start&&t<=e.end&&e.wavesurfer.play(e.start)}}))}},{key:"bindEvents",value:function(){var e=this,t=this.preventContextMenu;this.element.addEventListener("mouseenter",(function(t){e.fireEvent("mouseenter",t),e.wavesurfer.fireEvent("region-mouseenter",e,t)})),this.element.addEventListener("mouseleave",(function(t){e.fireEvent("mouseleave",t),e.wavesurfer.fireEvent("region-mouseleave",e,t)})),this.element.addEventListener("click",(function(t){t.preventDefault(),e.fireEvent("click",t),e.wavesurfer.fireEvent("region-click",e,t)})),this.element.addEventListener("dblclick",(function(t){t.stopPropagation(),t.preventDefault(),e.fireEvent("dblclick",t),e.wavesurfer.fireEvent("region-dblclick",e,t)})),this.element.addEventListener("contextmenu",(function(i){t&&i.preventDefault(),e.fireEvent("contextmenu",i),e.wavesurfer.fireEvent("region-contextmenu",e,i)})),(this.drag||this.resize)&&this.bindDragEvents()}},{key:"bindDragEvents",value:function(){var e,t,i,r,n,s,a,o,l,h=this,d=this.wavesurfer.drawer.container,u=this.scrollSpeed,c=(this.scrollThreshold,!1),v=function t(d){var c=h.util.withOrientation(d,h.vertical),v=h.wavesurfer.getDuration();if(s&&(i||n)){var f=c.clientX,g=0,p=0,m=0,y=h.regionsUtil.getRegionSnapToGridValue(h.wavesurfer.drawer.handleEvent(d)*v);if(i)-1===s?(p=o*h.wavesurfer.params.minPxPerSec,g=f-a.left):(p=l*h.wavesurfer.params.minPxPerSec,g=a.right-f);else{var w=h.minLength;w||(w=0),"start"===n?(y>h.end-w&&(y=h.end-w,m=u*s),y<0&&(y=0)):"end"===n&&(y<h.start+w&&(y=h.start+w,m=u*s),y>v&&(y=v))}var b=h.wrapper.scrollLeft;if(-1===s){if(0===Math.round(b))return;if(Math.round(b-p+g)<=0)return}else{if(Math.round(b)===r)return;if(Math.round(b+p-g)>=r)return}var E=b-m+u*s;if(-1===s){var L=Math.max(0+p-g,E);h.wrapper.scrollLeft=E=L}else{var k=Math.min(r-p+g,E);h.wrapper.scrollLeft=E=k}var R=y-e;e=y,i?h.onDrag(R):h.onResize(R,n),window.requestAnimationFrame((function(){t(d)}))}},f=function(s){var d=h.wavesurfer.getDuration();s.touches&&s.touches.length>1||(t=s.targetTouches?s.targetTouches[0].identifier:null,(h.drag||h.resize)&&s.stopPropagation(),e=h.regionsUtil.getRegionSnapToGridValue(h.wavesurfer.drawer.handleEvent(s,!0)*d),o=e-h.start,l=h.end-e,r=h.wrapper.scrollWidth-h.wrapper.clientWidth,a=h.util.withOrientation(h.wrapper.getBoundingClientRect(),h.vertical),h.isResizing=!1,h.isDragging=!1,"handle"===s.target.tagName.toLowerCase()?(h.isResizing=!0,n=s.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(h.isDragging=!0,i=!0,n=!1))},g=function(e){e.touches&&e.touches.length>1||((i||n)&&(h.isDragging=!1,h.isResizing=!1,i=!1,s=null,n=!1),c&&(c=!1,h.util.preventClick(),h.fireEvent("update-end",e),h.wavesurfer.fireEvent("region-update-end",h,e)))},p=function(r){var u=h.wavesurfer.getDuration(),f=h.util.withOrientation(r,h.vertical);if(!(r.touches&&r.touches.length>1)&&(!r.targetTouches||r.targetTouches[0].identifier==t)&&(i||n)){var g=h.regionsUtil.getRegionSnapToGridValue(h.wavesurfer.drawer.handleEvent(r)*u);if(i){var p=h.wavesurfer.getDuration();g>p-l&&(g=p-l),g-o<0&&(g=o)}if(n){var m=h.minLength;m||(m=0),"start"===n?(g>h.end-m&&(g=h.end-m),g<0&&(g=0)):"end"===n&&(g<h.start+m&&(g=h.start+m),g>u&&(g=u))}var y=g-e;if(e=g,h.drag&&i&&(c=c||!!y,h.onDrag(y)),h.resize&&n&&(c=c||!!y,h.onResize(y,n)),h.scroll&&d.clientWidth<h.wrapper.scrollWidth){var w=f.clientX;(s=w<a.left+h.edgeScrollWidth?-1:w>a.right-h.edgeScrollWidth?1:null)&&v(r)}}};this.element.addEventListener("mousedown",f),this.element.addEventListener("touchstart",f),document.body.addEventListener("mousemove",p),document.body.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("mouseup",g),document.body.addEventListener("touchend",g),this.on("remove",(function(){document.removeEventListener("mouseup",g),document.body.removeEventListener("touchend",g),document.body.removeEventListener("mousemove",p),document.body.removeEventListener("touchmove",p)})),this.wavesurfer.on("destroy",(function(){document.removeEventListener("mouseup",g),document.body.removeEventListener("touchend",g)}))}},{key:"onDrag",value:function(e){var t=this.wavesurfer.getDuration();this.end+e>t&&(e=t-this.end),this.start+e<0&&(e=-1*this.start);var i={direction:this._getDragDirection(e),action:"drag"};this.update({start:this.start+e,end:this.end+e},i)}},{key:"_getDragDirection",value:function(e){return e<0?"left":e>0?"right":null}},{key:"onResize",value:function(e,t){var i=this.wavesurfer.getDuration(),r={action:"resize",direction:"start"===t?"left":"right"};"start"===t?(e>0&&this.end-(this.start+e)<this.minLength&&(e=this.end-this.minLength-this.start),e<0&&this.end-(this.start+e)>this.maxLength&&(e=this.end-this.start-this.maxLength),e<0&&this.start+e<0&&(e=-1*this.start),this.update({start:Math.min(this.start+e,this.end),end:Math.max(this.start+e,this.end)},r)):(e<0&&this.end+e-this.start<this.minLength&&(e=this.start+this.minLength-this.end),e>0&&this.end+e-this.start>this.maxLength&&(e=this.maxLength-(this.end-this.start)),e>0&&this.end+e>i&&(e=i-this.end),this.update({start:Math.min(this.end+e,this.start),end:Math.max(this.end+e,this.start)},r))}},{key:"updateHandlesResize",value:function(e){var t;t=e?this.vertical?"row-resize":"col-resize":"auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:t}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:t})}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Region=r}},t={};var i=function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}(23);return i})()));
//# sourceMappingURL=wavesurfer.regions.min.js.map